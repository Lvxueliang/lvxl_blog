---
slug: HTTP
title: HTTP
authors: [Lvxl]
tags: [Http, Https, 网络]
---

# HTTP
超文本传输协议（Hyper Text Transfer Protocol，HTTP）是一个简单的请求-响应协议，它通常运行在TCP之上。它指定了客户端可能发送给服务器什么样的消息以及得到什么样的响应。请求和响应消息的头以ASCII形式给出；而消息内容则具有一个类似MIME的格式


### http1.0
HTTP1.0最早在网页中使用是在1996年，那个时候只是使用一些较为简单的网页上和网络请求上,是一种无状态、无连接的应用层协议，几年后被HTTP1.1代替并广泛使用

### http1.1
1. http1.1基于**文本解析**,把所有请求和响应作为纯文本
2. http1.1加入了缓存处理 **（强缓存和协商缓存）**
3. http1.1拥有长连接，并支持请求管道化（pipelining），(允许客户端不用等到服务器的响应就能发送下一个请求)
4. http1.1流控制基于tcp连接。当连接建立时，两端通过系统默认机制建立缓冲区。并通过ack报文来通知对方接收窗口大小，因为http1.1 依靠传输层来避免流溢出，每个tcp连接需要一个独立的流控制机制

`缺点`: 
**HTTP队头阻塞**
HTTP1.1增加了管线化技术，允许客户端不用等到服务器的响应就能发送下一个请求。目的为了在一次TCP连接上可以并行发送多个请求，来提高网络利用率。但是它有一个很大的缺点，服务器必须按照请求的顺序来响应。即后续请求的响应必须等到第一个响应发送之后才能发送，即使后续响应已经完成。这就是HTTP队头阻塞的来由。


### http2的新特性
1. 头部压缩
    - http.1.1 之前 `请求体` 一般会有响应的压缩编码过程, 通过`Content-Encoding` 头部字段来指定, 但是有没有想过头部字段本身的压缩呢?
    - http2 针对头部字段也采用了对应的压缩算法 `HPACK`, 对请求头进行压缩 
    - `hpack` 首先在服务器与客户端之间建立哈希表, 将要用的字段存放在这张表中,那么在传输的时候对于之前出现过的值，只需要把索引(比如0，1，2，...)传给对方即可，对方拿到索引查表就行了。这种传索引的方式，可以说让请求头字段得到极大程度的精简和复用
2. 多路复用
    - 先了解http队头阻塞
3. 二进制分帧


### http2快在哪里? 哪个阶段快了?

### Last-Modified和ETag是怎么配合使用的

### https 与 http 区别

### http缓存

浏览器缓存能优化性能，而浏览器缓存分为强缓存和协商缓存，都是从客户端读取缓存


强缓存:

协商缓存:

### get & post 区别
- 最直观的区别就是get把参数包含在url中, post通过request body传递参数
- get在浏览器回退时是无害的, 而post会再次提交请求
- get请求会被浏览器主动缓存, 而post不会, 除非手动设置
- get请求只能进行url编码, 而post支持多种编码方式
- get请求在url中传递的参数长度是有限制的, 而post没有
- 对参数的数据类型, get只接受ASCII(阿斯克码)字符, 而post没有限制
- get对比post更不安全, 因为参数直接暴露在url上, 所以不能用来传递敏感信息

**本质区别**
get产生一个tcp数据包, post产生两个tcp数据包

get: 浏览器会把http header和data一并发送出去, 服务器响应200 (返回数据)

post: 浏览器先发送header, 服务器响应100 continue, 浏览器再发送data, 服务器响应200
